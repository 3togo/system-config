#+Latex: \AtBeginDvi{\special{pdf:tounicode UTF8-UCS2}}
#+Latex: \begin{CJK*}{UTF8}{simsun}
#+Latex: \CJKtilde


#+TITLE:     Android网络和数据
#+AUTHOR:    包昊军（钧钩）
#+EMAIL:     baohaojun@gmail.com
#+DATE:      2014-01-20
#+LATEX_CLASS_OPTIONS: [presentation,CJKbookmarks]
#+DESCRIPTION:
#+KEYWORDS:
#+LANGUAGE:  en
#+OPTIONS:   H:2 num:t toc:t \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+LINK_UP:
#+LINK_HOME:

#+BEAMER_THEME: Berkeley
#+BEAMER_COLOR_THEME: spruce

* 前情回顾

** 上节内容
*** ListView & Adapter
*** 实现banner和列表视图List的同时滑动
*** 删除列表中一行
*** 双列列表

** 往期回顾
*** Android系统和环境
*** Activity等四大组件
*** ListView
* 课程目的
** 课程目的
*** 网络编程介绍
*** UI主线程和联网线程
*** Android文件系统介绍
*** 数据存储机制
*** 数据传递、共享

* 网络和数据
** 网络编程介绍
*** Socket（套接字）
- Tcp，Udp，Unix Domain
- 我的输入法编程

*** HTTP通讯
- HttpURLConnection （Android原生，最新版本性能更好）
- DefaultHttpClient （apache代码，早期bug较少）

*** WebView
- 频繁变化，或轻交互


** 小练习一
*** 获取一段JSON数据
- AllIn4Demo
- MainActivity1

** UI主线程和联网线程
- Android编程中，需要牢记：

  对网络数据流的操作是阻塞的

- Android实现联网的时候必须用多线程编程

** 工作线程与UI主线程间通信

*** runOnUiThread
    :PROPERTIES:
    :END:

#+BEGIN_SRC java
// In UI thread:
new Thread(new Runnable() {
   @Override
   public void run() {
     // do some work in working thread
     runOnUiThread(new Runnable() {
       @Override
       public void run() {
         // manipulate the UI elements with runOnUiThread
         mTextView.setText(mGetJsonHelper.result);
       }
     });
   }
}).start();
#+END_SRC
