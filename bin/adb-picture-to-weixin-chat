#!/bin/bash
if echo $SHELLOPTS | grep xtrace; then
    function debug() {
        read -p "press any key to continue..."
    }
else
    function debug() {
        sleep .5
    }
fi


if test -e "$1"; then
    pic=$1
else
    pic=$(get-newest-file ~/shots/)
fi
ext=${pic##*.}
adb_pic=/sdcard/DCIM/Camera/toqq-$(now|perl -npe 's/://g').$ext
adb push "$pic" $adb_pic
adb am startservice -n com.bhj.setclip/.PutClipService --es picture $adb_pic

case $(basename $0) in
    adb-picture-to-weixin-chat)
        adb-tap-mid-bot
        debug
        adb-tap 966 999
        debug
        adb-tap 125 1285
        debug
        adb-tap 519 417
        debug
        adb-tap 917 1848
        debug
        adb-tap 953 182
        debug
        adb-key BS
        ;;
    adb-picture-to-qq-chat)
        adb-tap-mid-bot
        debug
        adb-tap 151 999
        debug
        adb-tap 125 1476
        debug
        adb-tap 161 423
        debug
        adb-tap 917 1848
        debug
        adb-tap 433 1264
        debug
        adb-key BS
        ;;
esac
